name: Website Deployment1
on:
  push:
    branches:
      - main   
      - master   
jobs:
  lint:
    runs-on: windows-latest
    outputs:
        script_file: ${{steps.nam_list.outputs.script_file}}
    steps:
      - name: Get code
        uses: actions/checkout@v3
      - name : what is my name 
        id: nam_list
        run: |
         $a= "file testing"
         echo  "script_file=$a" >> $env:GITHUB_OUTPUT
      - name: npm install
        run: npm install
      - name : npm test
        id: npm_test_status
        run: npm test
      - name: Upload artifacts
        if: failure() && steps.npm_test_status.outcome == 'failure'
        uses: actions/upload-artifact@v4
        with:
          name: Upload 
          path: ${{github.workspace}} 

  deploy:
       needs: lint
       runs-on: windows-latest
       steps:
        - name: Get code1
          uses: actions/checkout@v3
        - name : what is my name 
          id: nam_list
          run: |
            write-host ${{ needs.lint.outputs.script_file }}
  failure:
       needs: [lint, deploy]
       if: failure() 
       runs-on: windows-latest
       environment: testing
       env: 
            MBNAME: ${{ secrets.MYDBNAME }}
       steps:
        - name: Get code2
          uses: actions/checkout@v3
        - name: Getdb name
          run: |
           $a = ${{ env.MBNAME }}
            write-host "$a"
            
        - name : what is my name 
          id: nam_list
          run: |
            write-host "failure  on jobs "
       